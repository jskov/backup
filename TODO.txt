
# Tests

Tests are run using a test certificate (in src/test/data/gpghome) which is unprotected. This means that the tests can decrypt without providing a password.

=========
* cli options, pack from command line
* built with signing
* build binary
* unpack all files and verify them
* check that .-file are included
* check that all sub-dirs (in depth) are included
* document that links are not included, that empty dirs are removed
* GNU long names
* tarInfo of dir names containing "
* verify self - include signature of all checksums, verify correctness
* verify extraction


Performance
* should performance check the double-write of nested tars
  maybe compute tar size from writing to nul-sink, then write once into the proper archive
  

  
TESTS TODO:
 o ensure target dir is clean for potential conflicts before starting
 o backup info added to restore script
 o pick up encryption errors for GUI presentation
 
 Test key created:
  $ gpg --homedir src/test/data/gpghome --generate-key 
     Real name: Backup Test Key
     Email address: jskov@mada.dk
     Password: (none!)
     281DE650E39B5DCA3E9D542092B7BAA1D6B4A52D
 
 Encrypt
  $ cat file | gpg --homedir src/test/data/gpghome --compress-algo none --with-colons --cipher-algo AES256 --batch --recipient 281DE650E39B5DCA3E9D542092B7BAA1D6B4A52D --encrypt > out.crypted
  $ gpg --homedir src/test/data/gpghome --no-symkey-cache -o out -d out.crypted
  